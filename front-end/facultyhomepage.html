  <!DOCTYPE html>
  <html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professor Dashboard</title>
    <link rel="stylesheet" href="css/facultyhomepage.css">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  </head>
  <body>
      <div class="welcome-text"id="welcomeText"></div>
    <nav class="sidebar">
      <ul>
        <li><a href="#"><i class="fas fa-home"></i></a></li>
        <li><a href="facultyinsert.html"><i class="fas fa-user-plus"></i></a></li>
        <li><a href="#" class="notification-btn"><i class="fas fa-bell"></i></a></li>
      
      </div>
        <li><a href="search.html"><i class="fas fa-search"></i></a></li>
      </ul>
      <div class="professor-icon">
          <i class="fas fa-user-tie"></i>
      </div>
      
      <button class="logout-btn" id="logoutBtn"><i class="fas fa-sign-out-alt"></i></button>

    </nav>
    <div class="professor-info">
      <div class="name">
        <h3>Name</h3>
        <p id="facultyName"></p>
      </div>
      <div class="email">
        <h3>Email</h3>
        <p id="facultyEmail"></p>
      </div>
      <div class="dept">
        <h3>Department</h3>
        <p id="facultyDept"></p>
      </div>
      <div class="cabin">
        <h3>Cabin No.</h3>
        <p id="facultyCabin"></p>
      </div>
      <div class="block">
        <h3>Block</h3>
        <p id="facultyBlock"></p>
      </div>
      <div class="block">
        <input type="hidden" id="selectedFacultyName" name="selectedFacultyName" value="">
          <label for="liveStatus">Live Status:</label>
          <input type="checkbox" id="liveStatus" onclick="toggleLiveStatus()">
        </div>
        <input type="hidden" id="hiddenFacultyId" value="">
    </div>
  
      <footer>
        <p>&copy; 2024 FindMyProfessor</p>
      </footer>

      <!-- Notification Tab -->
      <div id="notificationTab" class="notificationTab">
          <span class="close">&times;</span>
          <p>Notification</p>
      </div>
  </body>
  <script>
      const logoutBtn = document.querySelector('.logout-btn');
      const notificationBtn = document.querySelector('.notification-btn');
      const notificationTab = document.querySelector('.notificationTab');
      const closeBtn = document.querySelector('.close');

      notificationBtn.addEventListener('click', (event) => {
          event.stopPropagation();
          const rect = notificationBtn.getBoundingClientRect();
          notificationTab.style.display = 'block';
          notificationTab.style.top = `${rect.bottom}px`;
          notificationTab.style.left = `${rect.left}px`;
      });

      window.addEventListener('click', (event) => {
          if (!event.target.closest('.notificationTab') && event.target !== notificationBtn) {
              notificationTab.style.display = 'none';
          }
      });

      closeBtn.addEventListener('click', () => {
          notificationTab.style.display = 'none';
      });

      window.addEventListener('click', (event) => {
          if (!event.target.closest('.notificationTab') && event.target !== notificationBtn) {
              notificationTab.style.display = 'none';
          }
      });
      document.addEventListener('DOMContentLoaded', function() {
      // Get the logout button element
      const logoutBtn = document.getElementById('logoutBtn');

      // Add event listener to the logout button
      logoutBtn.addEventListener('click', function() {
          // Redirect to the logout page when the button is clicked
          window.location.href = 'facultylogin.html'; // Replace 'logout.html' with the URL of your logout page
      });
  });

      document.addEventListener('DOMContentLoaded', function() {
        const urlParams = new URLSearchParams(window.location.search);
        const facultyId = urlParams.get('facultyId');
        const selectedFacultyName = urlParams.get('facultyName');

        // Fetch faculty details from the backend
        fetch(`http://localhost:5003/get-faculty-details?facultyId=${facultyId}`)
          .then(response => {
            if (!response.ok) {
              throw new Error('Network response was not ok');
            }
            return response.json();
          })
          .then(data => {
            // Update welcome message with faculty name
            document.getElementById('welcomeText').textContent = `Welcome ${data.fname}!`;
            
            // Update professor info with fetched data
            document.querySelector('.name p').textContent = data.fname;
            document.querySelector('.email p').textContent = data.femail;
            document.querySelector('.cabin p').textContent = data.fcabinno;
            document.querySelector('.block p').textContent = data.fblock;
            document.querySelector('.dept p').textContent = data.fdept;
            // Update other fields similarly
          })
          .catch(error => {
            console.error('Error fetching faculty details:', error);
            // Handle error if needed
          });
      });
      function toggleLiveStatus() {
                  const facultyId = document.getElementById('hiddenFacultyId').value; // Get faculty ID
                  const liveStatus = document.getElementById('liveStatus').checked; // Get live status value
          
                  // Send live status data to backend server
                  fetch('http://localhost:5003/update-live-status', {
                      method: 'POST',
                      headers: {
                          'Content-Type': 'application/json'
                      },
                      body: JSON.stringify({ facultyId, liveStatus }) 
                  })
                  .then(response => {
                      if (!response.ok) {
                          throw new Error('Network response was not ok');
                      }
                      return response.text();
                  })
                  .then(data => {
                      console.log('Live status updated successfully:', data);
                      // Handle response if needed
                  })
                  .catch(error => {
                      console.error('Error updating live status:', error);
                      // Handle error if needed
                  });
              }
              document.addEventListener('DOMContentLoaded', function() {
          const urlParams = new URLSearchParams(window.location.search);
          const facultyId = urlParams.get('facultyId'); // Change from username to facultyId

          // Display the faculty ID in the top menu bar or wherever needed
          //const usernameDisplay = document.getElementById('usernameDisplay');
          //usernameDisplay.textContent = `WELCOME, Faculty ID: ${facultyId}!`;

          // Set the faculty ID value in the hidden field
          console.log(facultyId);
          document.getElementById('hiddenFacultyId').value = facultyId;
      });
  </script>

  </html>
